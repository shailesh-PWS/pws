<html>
<head>
<title>ICA Vehicle-1 Summary Page</title>
<style type="text/css">
	body {
		font-family: Arial, Helvetica, sans-serif;
		font-size: 14px;
	}
	.grandTitle {
		font-size: 22px;
		font-weight: bold;
	}		
	.subhead {
		font-size: 19px;
		font-weight: bold;
	}	
	#mlcContainer{
	  margin: auto;
	  width: 50%;
	  padding: 10px;
	  position: absolute;
	  top: 30%;
      left: 30%;
      transform: translate(-50%, -50%);  
    }
	
	#menuTable{
	  margin: auto;
	  width: 50%;
	  padding: 10px;
	  text-align: center;
	  position: relative;
	}
	
	table {
	  border-collapse: collapse;
	  width: 100%;
	}
	
	th {
	  height: 50px;
	  color: white;
	  background-color: #4CAF50;
	}
	
	#subHeader {
	
	background-color:white;
	color:red;
	}
	
	table, th, td,tr {
	  border: 1px solid black;
	}
</style>


 <!-- type="text/javascript" src="assets/jquery-min.js"></script> -->
<!-- <script type="text/javascript" src="assets/fastclick-min.js"></script> -->

<script type="text/javascript">

	//---- meta data to be filled by game designer ------------------------------
	// --- ensure reward names are same as in your psm file, sequence im-material
	// 
	// -------------------------------------------------------------------------
	var smryRewardInfo = {
		"title": "Telltale Inspection",
		"displayVehicleId" : 0,
		"vehicles" : [
			{
				"vehicleId" : 0,
				"displayName" : "Vehicle-1 Summary",
				"vehicle-examined" : false,
				"sections" : ["Front", "Boot", "Rear", "Engine","Boot","Side","Passenger","Under"],
				"telltales": 
				[
					{
						"sectionName" : "Rear",
						"tellTaleName" : "Bulging/uneven surface",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301a1_1",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Rear",
						"tellTaleName" : "Tampered license plate",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301a1_2",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Rear",
						"tellTaleName" : "Old license plate on new and clean car",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301a1_3",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Rear",
						"tellTaleName" : "Old license plate on new and clean car",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301a1_3",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Rear",
						"tellTaleName" : "Scratches",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301a1_4",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Rear",
						"tellTaleName" : "Car lights",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301a1_5",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Boot",
						"tellTaleName" : "Speaker",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301b1_1",
						"rewardIdentified": false,
						"rewardQty": 1
					},
                    {
						"sectionName" : "Boot",
						"tellTaleName" : "Messy boot compartment",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301b1_2",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Side",
						"tellTaleName" : "Bulging/uneven surface",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301c1_1",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Side",
						"tellTaleName" : "Car paint",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301c1_2",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Side",
						"tellTaleName" : "Unable to wind down the window fully/Heavy doors when swung",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301c1_3",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Side",
						"tellTaleName" : "Items attached inside the wheel wells",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301c1_4",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Front",
						"tellTaleName" : "Bulging/uneven surface",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301d1_1",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Front",
						"tellTaleName" : "Car lights",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301d1_2",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Front",
						"tellTaleName" : "Car paint",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301d1_3",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Front",
						"tellTaleName" : "License plate",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301d1_4",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Front",
						"tellTaleName" : "Old Number plate",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301d1_5",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Front",
						"tellTaleName" : "Scratches",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301d1_6",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Engine",
						"tellTaleName" : "Loud engine noise",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301e1_1",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Engine",
						"tellTaleName" : "Signs of tampering1",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301e1_2",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Engine",
						"tellTaleName" : "Signs of tampering2",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301e1_3",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Passenger",
						"tellTaleName" : "Bulging/Uneven surfaces and stitchmarks",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301f1_1",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Passenger",
						"tellTaleName" : "Empty glove compartment",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301f1_2",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Passenger",
						"tellTaleName" : "Floorboard",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301f1_3",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Passenger",
						"tellTaleName" : "Floorboard",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301f1_3",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Passenger",
						"tellTaleName" : "Odour from airvalve",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301f1_4",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Passenger",
						"tellTaleName" : "Glue stains/smell",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301f1_5",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					{
						"sectionName" : "Under",
						"tellTaleName" : "Welding marks",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301g1_1",
						"rewardIdentified": false,
						"rewardQty": 1
					},
										{
						"sectionName" : "Under",
						"tellTaleName" : "Items attached under the vehicle/beside the wheels",
						"rewardIndex": undefined,
						"rewardType": "reward",
						"rewardName": "Ans0301g1_2",
						"rewardIdentified": false,
						"rewardQty": 1
					},
					
				]
			}
				]
			}; 
	
    $(document).ready(function(){		

		// ------------- window resizing functions ---------------------------------------------
			function reScale(){
			
				bgWidth = $("#mlcContainer").width();
				bgHeight = $("#mlcContainer").height();
			
				var currScale = Math.min($(this).width()/bgWidth,$(this).height()/bgHeight);
				var newWidth = bgWidth*currScale;
				var newHeight = bgHeight*currScale;
				$("#mlcContainer").css({
					transform: "scale(" + currScale + ")",
				}); 
			}

		window.onresize = function(){
			reScale();   
		}
		// ------------- unity side reward functions --------------------------------------------
		function GetRewardId(rewardName){
			var rewardId=undefined;
			for(var i=0;i<ItemManager.itemJSON.length;i++){
				if(ItemManager.itemJSON[i].name==rewardName){
						rewardId = parseInt(ItemManager.itemJSON[i].id);
						break;
				}
			}
			return rewardId;
		}

		function GetRewardName(rewardId){
			var rewardName=undefined;
			for(var i=0;i<ItemManager.itemJSON.length;i++){
				if(parseInt(ItemManager.itemJSON[i].id)==parseInt(rewardId)){
						rewardName = ItemManager.itemJSON[i].name;
						break;
				}
			}
			return rewardName;
		}



		// ------------- custom game page prep/display functions ---------------------------------
		function SummaryPage(){
			
			var titleHtml = '<th align="center" colspan="2" id="GTitle" ><font class="grandTitle" >' +  smryRewardInfo.title + '</font></th>'
			$("#menuTable").append(titleHtml);
			
			
			var subMenuHtml = '<tr class="rows"  ><td colspan="2" id="subHeader" align="center"><font class="subhead">' + smryRewardInfo.vehicles[0].displayName + '</font></td></tr>'
			$("#menuTable").append(subMenuHtml);
			
			
			var headingHTML = '<tr><td align="center"   style="font-weight:bold;" bgcolor="#CCCCCC"><b>Section</td></b><td align="left" style="font-weight:bold;" bgcolor="#CCCCCC"><b>TellTale</td></b></tr>';
			$("#menuTable").append(headingHTML);
			var inventoryData = Global.InventoryItemJSON;
			for(var k=0;k<inventoryData.length;k++){               
				//--- check for each rewards present in there if they belong to prior rewards
				var rewardName = GetRewardName(inventoryData[k].ItemId);
				for(var i=0;i<smryRewardInfo.vehicles.length;i++){
						for(var j=0;j<smryRewardInfo.vehicles[i].telltales.length;j++)
						{
							if (smryRewardInfo.vehicles[i].telltales[j].rewardName === rewardName)
							{	
								smryRewardInfo.vehicles[i].telltales[j].rewardIdentified  = true;
								var menuItemHtml = '<tr><td align="center" bgcolor="#CCCCCC">' + smryRewardInfo.vehicles[i].telltales[j].sectionName+'</td><td align="left" bgcolor="#CCCCCC">' + smryRewardInfo.vehicles[i].telltales[j].tellTaleName+'</td></tr>';								
								$("#menuTable").append(menuItemHtml);
							}
						}
					
					}
				}
			}

		// ----------- logic proper starts here for page load ---------------------------------------
		SummaryPage();
		reScale();   

	});
</script>
</head>

<body>
	<div id="mlcContainer">
				<table id="menuTable" valign="center" cellpadding="2" cellspacing="2">
					<!-- filled from json dynamically -->
				</table>

	</div>
</body>

</html>
